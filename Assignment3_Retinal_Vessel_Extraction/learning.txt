Retinal Vessel Extraction using Niblack and Sauvola Thresholding
================================================================

Assignment 3: Sauvola vs Niblack for Thin Vessel Extraction

Dataset:
- DRIVE training dataset (20 fundus images)
- Ground truth: Manual vessel segmentation by experts
- FOV masks to exclude background

Preprocessing Pipeline:
1. Green channel extraction (best vessel contrast)
2. CLAHE contrast enhancement (adaptive histogram equalization)
3. Gaussian smoothing (5x5 kernel to reduce noise)
4. Field-of-view masking

Thresholding Methods:
1. Niblack: T(x,y) = mean + k * std_dev
   - Parameters: window_size=25, k=0.2
   - More aggressive, captures more detail but also noise

2. Sauvola: T(x,y) = mean * (1 + k * (std_dev/R - 1))
   - Parameters: window_size=25, k=0.1
   - Normalized threshold, cleaner segmentation

Results:
-----------------------------------
NIBLACK:
  - Average Sensitivity: 0.8426
  - Average Dice: 0.4727
  - Average Jaccard: 0.3110

SAUVOLA:
  - Average Sensitivity: 0.6792
  - Average Dice: 0.6674
  - Average Jaccard: 0.5036
-----------------------------------

Key Observations:
1. Niblack has HIGHER sensitivity (84.26% vs 67.92%)
   - Better at detecting thin vessels
   - More aggressive thresholding captures faint structures
   - Trade-off: More false positives (noise)

2. Sauvola has BETTER Dice and Jaccard scores
   - More balanced precision-recall trade-off
   - Normalized threshold reduces over-segmentation
   - Cleaner vessel boundaries

3. Why the difference?
   - Niblack directly uses std_dev which amplifies local variations
   - Sauvola normalizes by R (dynamic range) making it more robust
   - For thin vessels: Niblack captures more, Sauvola is more accurate

Learning Outcomes:
- Local adaptive thresholding adapts to varying illumination
- Sensitivity alone is not enough - need to consider precision
- Dice/Jaccard provide better overall segmentation quality measure
- CLAHE preprocessing significantly improves vessel contrast
- Parameter tuning (k value) greatly affects results
